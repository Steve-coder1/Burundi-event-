{% extends 'base.html' %}
{% block content %}
<h1>{{ 'Edit Event' if event else 'Add Event' }}</h1>
<div class="grid two-col">
  <form method="post" class="card form-grid">
    <label>Title
      <input name="title" required value="{{ event.title if event else '' }}">
    </label>
    <label>Date
      <input type="datetime-local" name="event_date" required value="{{ event.event_date.strftime('%Y-%m-%dT%H:%M') if event else '' }}">
    </label>
    <label>Language
      <select name="language">
        <option value="en" {% if event and event.language == 'en' %}selected{% endif %}>English</option>
        <option value="fr" {% if event and event.language == 'fr' %}selected{% endif %}>French</option>
      </select>
    </label>
    <label>Categories
      <select name="categories" multiple size="5">
        {% for category in categories %}
          <option value="{{ category.id }}" {% if event and category in event.categories %}selected{% endif %}>{{ category.name }}</option>
        {% endfor %}
      </select>
    </label>
    <label>Description
      <textarea name="description" rows="8" required data-preview-target="#preview-event">{{ event.description if event else '' }}</textarea>
    </label>
    <button class="btn" type="submit">{{ 'Save Changes' if event else 'Create Event' }}</button>
  </form>
  <aside class="card">
    <h3>Live Preview</h3>
    <div id="preview-event" class="preview"></div>
  </aside>
</div>
{% endblock %}
